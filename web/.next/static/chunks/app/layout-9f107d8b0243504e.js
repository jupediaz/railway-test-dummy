(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7513:function(e,t,o){Promise.resolve().then(o.bind(o,7618)),Promise.resolve().then(o.t.bind(o,3925,23)),Promise.resolve().then(o.t.bind(o,2853,23))},7618:function(e,t,o){"use strict";o.r(t),o.d(t,{Providers:function(){return c}});var r=o(7437),a=o(9715),n=o(8038),i=o(2265),l=o(7122),s=o(1424);function c(e){let{children:t}=e,[o]=(0,i.useState)(()=>new a.S({defaultOptions:{queries:{staleTime:6e4,retry:2}}}));return(0,r.jsx)(n.aH,{client:o,children:(0,r.jsxs)(l.H,{children:[t,(0,r.jsx)(s.x7,{position:"top-right"})]})})}},7122:function(e,t,o){"use strict";o.d(t,{H:function(){return i},a:function(){return l}});var r=o(7437),a=o(2265);let n=(0,a.createContext)(null);function i(e){let{children:t}=e,[o,i]=(0,a.useState)(null),[l,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("auth-user"),t=localStorage.getItem("auth-expiry");if(e&&t){let o=new Date(t),r=new Date;if(r<o){let t=JSON.parse(e);i(t),console.log("Sesi\xf3n restaurada:",t.email)}else localStorage.removeItem("auth-user"),localStorage.removeItem("auth-expiry"),console.log("Sesi\xf3n expirada, limpiando storage")}}catch(e){console.error("Error restaurando sesi\xf3n:",e),localStorage.removeItem("auth-user"),localStorage.removeItem("auth-expiry")}finally{s(!1)}})()},[]);let c=async(e,t)=>new Promise((o,r)=>{setTimeout(()=>{console.log("Intentando login con:",{email:'"'.concat(e,'"'),password:'"'.concat(t,'"')});let a=e.trim(),n=t.trim();if("paciente@demo.com"===a&&"demo123"===n){console.log("Login exitoso!");let e={id:"demo-patient-1",email:"paciente@demo.com",role:"patient"},t=new Date;t.setDate(t.getDate()+7),localStorage.setItem("auth-user",JSON.stringify(e)),localStorage.setItem("auth-expiry",t.toISOString()),i(e),o()}else console.log("Credenciales incorrectas:",{emailMatch:"paciente@demo.com"===a,passwordMatch:"demo123"===n,expected:{email:"paciente@demo.com",password:"demo123"},received:{email:a,password:n}}),r(Error("Credenciales incorrectas"))},100)}),u=async()=>{localStorage.removeItem("auth-user"),localStorage.removeItem("auth-expiry"),i(null),console.log("Sesi\xf3n cerrada y storage limpiado")};return(0,r.jsx)(n.Provider,{value:{user:o,loading:l,signIn:c,signOut:u},children:t})}let l=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},2853:function(){}},function(e){e.O(0,[424,342,971,472,744],function(){return e(e.s=7513)}),_N_E=e.O()}]);